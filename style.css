:root{
  --bg:#0b0e13;--ink:#e7eef8;--muted:#9fb2c7;--line:#263245;--panel:#0f1724;
  --ok:#22c55e;--hit:#b400ff;--toolbar:rgba(8,12,19,.86);--blur:10px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);
  font-family:Inter,system-ui,Segoe UI,Roboto,sans-serif;-webkit-tap-highlight-color:transparent}
.app{height:100dvh;width:100vw;display:flex;flex-direction:column}
.viewport{position:relative;height:100%;background:#000}
.viewport.fs{position:fixed;inset:0;height:100dvh;width:100vw;z-index:10}
video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:grayscale(100%)}
.overlay{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;mix-blend-mode:screen;pointer-events:none;z-index:2}
.flash{position:absolute;inset:0;background:#fff;opacity:0;pointer-events:none;transition:opacity .12s ease;z-index:3}

.hud{position:absolute;left:10px;top:10px;display:flex;gap:8px;align-items:center;
  font-size:12px;color:#d7deef;background:rgba(12,17,25,.60);padding:6px 10px;border-radius:14px;border:1px solid var(--line);z-index:6}

.toolbar{position:absolute;bottom:10px;left:10px;right:10px;display:grid;grid-template-columns:repeat(5,1fr);gap:10px;z-index:6;
  background:var(--toolbar);backdrop-filter:blur(var(--blur));border:1px solid var(--line);padding:10px;border-radius:16px}
.tool{font-size:14px;font-weight:600;border:1px solid var(--line);background:rgba(12,18,28,.72);color:var(--ink);padding:12px;border-radius:12px;cursor:pointer}
.tool:active{transform:scale(.98)}

/* Secondary / install button */
.tool.secondary{
  border-style:dashed;
  font-weight:500;
  opacity:.9;
}

/* Alert button colors */
.tool.alert{border-color:rgba(34,197,94,.45); color:var(--ok);}
.tool.alert[aria-pressed="false"]{border-color:rgba(156,163,175,.45); color:#cbd5e1;}
.tool.alert::after{content:'';display:inline-block;width:8px;height:8px;border-radius:999px;margin-left:8px;background:var(--ok);box-shadow:0 0 0 2px rgba(34,197,94,.25)}
.tool.alert[aria-pressed="false"]::after{background:#94a3b8; box-shadow:0 0 0 2px rgba(148,163,184,.2)}

/* Install / Add-to-home-screen UI */
.install-shell{
  position:fixed;
  inset:0;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  background:rgba(0,0,0,.55);
  opacity:0;
  pointer-events:none;
  transition:opacity .2s ease;
  z-index:20;
}
.install-shell.show{
  opacity:1;
  pointer-events:auto;
}
@media (min-width:640px){
  .install-shell{
    align-items:center;
  }
}
.install-panel{
  position:relative;
  width:100%;
  max-width:520px;
  background:var(--panel);
  border-radius:18px 18px 0 0;
  padding:18px 18px 20px;
  box-shadow:0 16px 40px rgba(0,0,0,.65);
  border:1px solid var(--line);
}
@media (min-width:640px){
  .install-panel{
    border-radius:18px;
  }
}
.install-close{
  position:absolute;
  top:10px;
  right:18px;
  background:none;
  border:none;
  color:var(--muted);
  font-size:20px;
  cursor:pointer;
}
#installTitle{
  margin:0 0 4px;
  font-size:18px;
}
.install-env{
  margin:4px 0 12px;
  font-size:14px;
  color:var(--muted);
}

.install-steps{
  font-size:15px;
  color:var(--ink);
  line-height:1.5;
}
.install-steps ol{
  padding-left:22px;
  margin:8px 0 0;
}
.install-steps li{
  margin-bottom:8px;
}
.install-step-title{
  font-weight:700;
  font-size:15px;
}
.install-step-body{
  font-size:14px;
  color:var(--muted);
}
.install-note{
  margin:10px 0 0;
  font-size:13px;
  color:var(--muted);
}

/* Big install action button for supported Android browsers */
.install-now-btn{
  margin-top:14px;
  width:100%;
  border-radius:12px;
  border:1px solid rgba(34,197,94,.45);
  background:#052814;
  color:#bbf7d0;
  font-size:16px;
  font-weight:700;
  padding:12px 14px;
  cursor:pointer;
}
.install-now-btn:active{
  transform:scale(.98);
}
.install-small-hint{
  margin-top:6px;
  font-size:12px;
  color:var(--muted);
  text-align:center;
}


/* ===========================
   Last Sign Lock Mode
   =========================== */
.ls-lock{
  position:absolute;
  inset:0;
  display:none;
  z-index:12;
  pointer-events:none;
}
.ls-lock.show{
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  padding:12px;
  pointer-events:auto;
}
.ls-top{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
}
.ls-chip{
  font-size:12px;
  color:var(--muted);
  background:rgba(12,17,25,.62);
  border:1px solid var(--line);
  padding:8px 10px;
  border-radius:999px;
  backdrop-filter:blur(var(--blur));
  white-space:nowrap;
}
.ls-exit{
  border:1px solid var(--line);
  background:rgba(12,18,28,.78);
  color:var(--ink);
  padding:8px 12px;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
}
.ls-core{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
  padding:10px 8px;
}
.ls-arrow-wrap{
  position:relative;
  width:min(70vw, 280px);
  height:min(70vw, 280px);
  display:grid;
  place-items:center;
}
.ls-ring{
  position:absolute;
  inset:0;
  border-radius:999px;
  border:1px solid rgba(159,178,199,.25);
  box-shadow:0 0 0 8px rgba(10,14,19,.38) inset;
}
.ls-arrow{
  width:0;height:0;
  border-left:16px solid transparent;
  border-right:16px solid transparent;
  border-bottom:56px solid #bbf7d0;
  filter:drop-shadow(0 10px 20px rgba(34,197,94,.18));
  transform:rotate(0deg);
  transform-origin:50% 70%;
}
.ls-readout{
  width:min(88vw, 520px);
  text-align:center;
  background:rgba(12,17,25,.62);
  border:1px solid var(--line);
  border-radius:18px;
  padding:12px 12px;
  backdrop-filter:blur(var(--blur));
}
.ls-distance{
  font-size:32px;
  font-weight:900;
  letter-spacing:-0.02em;
}
.ls-bearing{
  margin-top:4px;
  color:var(--muted);
  font-size:13px;
}
.ls-hint{
  margin-top:10px;
  font-size:13px;
  color:var(--muted);
}
.ls-actions{
  display:grid;
  grid-template-columns:1.4fr 1fr 0.8fr;
  gap:10px;
  background:var(--toolbar);
  border:1px solid var(--line);
  border-radius:16px;
  padding:10px;
  backdrop-filter:blur(var(--blur));
}
.ls-btn{
  border:1px solid var(--line);
  background:rgba(12,18,28,.78);
  color:var(--ink);
  padding:12px 10px;
  border-radius:12px;
  font-weight:800;
  cursor:pointer;
}
.ls-btn:active{ transform:scale(.98); }
.ls-btn.primary{
  border-color:rgba(34,197,94,.45);
  background:#052814;
  color:#bbf7d0;
}
.ls-btn.danger{
  border-color:rgba(244,63,94,.35);
  color:#fecdd3;
  background:rgba(58,8,16,.50);
}

@media (max-width:420px){
  .toolbar{ grid-template-columns:repeat(3, 1fr); grid-auto-rows:auto; }
  .ls-actions{ grid-template-columns:1fr; }
}

/* Install helper add-ons */
.install-subtitle{
  margin:8px 0 10px;
  font-size:13px;
  color:var(--muted);
  line-height:1.45;
}
.install-badges{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin:6px 0 10px;
}
.badge{
  font-size:12px;
  color:#cfe2ff;
  border:1px solid rgba(38,50,69,.9);
  background:rgba(12,18,28,.55);
  padding:6px 10px;
  border-radius:999px;
}
.install-foot{
  margin-top:12px;
  border-top:1px solid rgba(38,50,69,.75);
  padding-top:12px;
}
.install-foot-note{
  font-size:12px;
  color:var(--muted);
  line-height:1.45;
}
